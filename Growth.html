<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Growth Focus Group - NFVT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root { 
            --gold-gradient: linear-gradient(135deg, #d4af37 0%, #f1c40f 100%);
            --green-gradient: linear-gradient(135deg, #1d976c 0%, #93f9b9 100%);
            --orange-gradient: linear-gradient(135deg, #f09819 0%, #edde5d 100%);
        }

        * { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Poppins', sans-serif; 
            background: #ffffff; /* Clean White Background */
            min-height: 100vh;
            padding: 30px 15px; 
            color: #333; 
        }

        .container { 
            max-width: 1200px; 
            background: #ffffff; 
            padding: 40px; 
            border-radius: 25px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.08); 
            margin: auto; 
            border: 1px solid #f0f0f0;
        }

        .header-area { text-align: center; margin-bottom: 40px; }
        .header-logo {
            max-width: 160px;
            height: auto;
            margin-bottom: 10px;
        }

        h2 { 
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase; 
            letter-spacing: 2px; 
            font-size: 28px; 
            font-weight: 900; 
        }

        /* Summary Cards */
        .summary-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 35px; }
        .card { padding: 25px; border-radius: 15px; color: white; text-align: center; }
        .gold-card { background: var(--gold-gradient); box-shadow: 0 8px 20px rgba(212, 175, 55, 0.2); }
        .green-card { background: var(--green-gradient); box-shadow: 0 8px 20px rgba(29, 151, 108, 0.2); }
        .card label { font-size: 13px; text-transform: uppercase; font-weight: 800; opacity: 0.9; }
        .card span { display: block; font-size: 32px; font-weight: 900; margin-top: 5px; }

        /* Form Styling */
        .form-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
            gap: 15px; margin-bottom: 25px; background: #fcfcfc; padding: 25px; 
            border-radius: 15px; border: 1px solid #eee;
        }
        .form-group label { display: block; font-size: 12px; font-weight: 700; color: #666; margin-bottom: 5px; text-transform: uppercase; }
        input, select { padding: 12px; border: 1.5px solid #e5e5e5; border-radius: 10px; outline: none; width: 100%; font-size: 14px; }
        input:focus { border-color: #d4af37; }
        
        /* Buttons */
        .btn-row { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 35px; }
        button { padding: 15px 25px; border: none; border-radius: 12px; cursor: pointer; font-weight: 800; color: white; text-transform: uppercase; font-size: 13px; }
        .submit-btn { background: var(--orange-gradient); flex: 2; box-shadow: 0 5px 15px rgba(240, 152, 25, 0.2); }
        .excel-btn { background: var(--green-gradient); }
        .reset-btn { background: #f1f1f1; color: #888; }
        button:hover { transform: translateY(-2px); opacity: 0.9; }

        /* Search Bar */
        .search-container { margin-bottom: 25px; }
        .search-input { 
            width: 100%; padding: 14px 20px; border: 2px solid #f1f1f1; border-radius: 12px; 
            font-size: 15px; outline: none; box-sizing: border-box; 
        }
        .search-input:focus { border-color: #d4af37; background: #fffdf9; }

        /* Table Styling */
        .table-wrap { overflow-x: auto; border-radius: 15px; border: 1px solid #eee; background: white; }
        table { width: 100%; border-collapse: collapse; min-width: 800px; }
        th { background: #fafafa; padding: 15px; text-align: left; color: #999; font-size: 11px; text-transform: uppercase; border-bottom: 2px solid #f0f0f0; }
        td { padding: 15px; border-bottom: 1px solid #f7f7f7; font-size: 14px; vertical-align: middle; }
        tr:hover { background: #fffcf5; }
        .total-pv-cell { font-weight: 900; background: #fffdf0; color: #b8860b; }

        /* Action Buttons */
        .wa-btn { background: #25D366; color: white; padding: 7px 12px; border-radius: 8px; text-decoration: none; font-size: 11px; font-weight: 700; display: inline-block; }
        .edit-btn { background: #f39c12; color: white; border: none; padding: 7px 12px; border-radius: 8px; font-size: 11px; cursor: pointer; margin-right: 4px; }
        .delete-btn { background: #e74c3c; color: white; border: none; padding: 7px 12px; border-radius: 8px; font-size: 11px; cursor: pointer; }

        /* Recycle Bin */
        .trash-section { margin-top: 40px; padding: 25px; background: #fffafa; border-radius: 15px; border: 1px dashed #ffdada; }
        .trash-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 10px; margin-bottom: 8px; border: 1px solid #fee2e2; }

        @media (max-width: 768px) { .summary-row { grid-template-columns: 1fr; } .container { padding: 20px; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header-area">
        <img src="https://i.postimg.cc/JDPXPtc5/logo-new.png" alt="NFVT Logo" class="header-logo">
        <h2>Growth Focus Group</h2>
    </div>

    <div class="summary-row">
        <div class="card gold-card"><label>Total Self PV</label><span id="totalSelf">0</span></div>
        <div class="card green-card"><label>Total Group PV</label><span id="totalGroup">0</span></div>
    </div>
    
    <form id="trackerForm">
        <input type="hidden" id="editIndex" value="-1">
        <div class="form-grid">
            <div class="form-group"><label>Date</label><input type="date" id="entryDate"></div>
            <div class="form-group"><label>Name</label><input type="text" id="name" placeholder="Member Name" required></div>
            <div class="form-group"><label>Mobile</label><input type="tel" id="mobile" placeholder="91XXXXXXXXXX" required></div>
            <div class="form-group">
                <label>Level</label>
                <select id="level" required>
                    <option value="5%">5%</option><option value="8%">8%</option><option value="12%">12%</option><option value="16%">16%</option>
                    <option value="Bronze">Bronze Director</option><option value="Silver">Silver Director</option>
                    <option value="Gold">Gold Director</option><option value="Star">Star Director</option>
                    <option value="Diamond">Diamond Director</option><option value="Crown">Crown Director</option>
                </select>
            </div>
            <div class="form-group"><label>Self PV</label><input type="number" id="selfPv" value="0" required></div>
            <div class="form-group"><label>Group PV</label><input type="number" id="groupPv" value="0" required></div>
        </div>
        
        <div class="btn-row">
            <button type="submit" class="submit-btn" id="saveBtn">Save Member Data</button>
            <button type="button" class="reset-btn" onclick="resetForm()">Reset</button>
            <button type="button" class="excel-btn" onclick="exportToExcel()">Download Excel</button>
        </div>
    </form>

    <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="ðŸ” Search by name, level, or mobile..." onkeyup="filterTable()">
    </div>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>S.No</th><th>Date</th><th>Member Name</th><th>Level</th><th>Self</th><th>Group</th><th style="background:#fff9e6;">Total PV</th><th>Remind</th><th>Management</th>
                </tr>
            </thead>
            <tbody id="activeBody"></tbody>
        </table>
    </div>

    <div class="trash-section" id="trashSection" style="display:none;">
        <h4 style="color:#e53e3e; margin-bottom:15px; font-size:14px;">Recycle Bin</h4>
        <div id="trashList"></div>
    </div>
</div>

<script>
    document.getElementById('entryDate').valueAsDate = new Date();
    const activeBody = document.getElementById('activeBody');
    const trashList = document.getElementById('trashList');

    window.onload = function() { displayData(); };

    function filterTable() {
        const query = document.getElementById('searchInput').value.toUpperCase();
        const rows = activeBody.getElementsByTagName('tr');
        for (let row of rows) {
            row.style.display = row.innerText.toUpperCase().includes(query) ? "" : "none";
        }
    }

    function sendWhatsApp(name, mobile) {
        const msg = `Hi ${name}, reminder from NFVT. Kindly update your Daily PV.\n\nà®µà®£à®•à¯à®•à®®à¯ ${name}, NFVT à®¨à®¿à®©à¯ˆà®µà¯‚à®Ÿà¯à®Ÿà®²à¯. à®‰à®™à¯à®•à®³à¯ à®‡à®©à¯à®±à¯ˆà®¯ Daily PV-à® à®…à®ªà¯à®Ÿà¯‡à®Ÿà¯ à®šà¯†à®¯à¯à®¯à®µà¯à®®à¯.`;
        window.open(`https://wa.me/${mobile}?text=${encodeURIComponent(msg)}`, '_blank');
    }

    document.getElementById('trackerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const editIdx = parseInt(document.getElementById('editIndex').value);
        const sPV = parseFloat(document.getElementById('selfPv').value) || 0;
        const gPV = parseFloat(document.getElementById('groupPv').value) || 0;
        const entry = {
            date: document.getElementById('entryDate').value,
            name: document.getElementById('name').value,
            mobile: document.getElementById('mobile').value,
            level: document.getElementById('level').value,
            selfPv: sPV,
            groupPv: gPV,
            totalPv: sPV + gPV
        };
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP')) || [];
        if (editIdx === -1) data.push(entry); else data[editIdx] = entry;
        localStorage.setItem('NFVT_FINAL_APP', JSON.stringify(data));
        resetForm(); displayData();
    });

    function displayData() {
        activeBody.innerHTML = '';
        trashList.innerHTML = '';
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP')) || [];
        let trash = JSON.parse(localStorage.getItem('NFVT_FINAL_TRASH')) || [];
        let ts = 0, tg = 0;
        data.forEach((item, index) => {
            ts += item.selfPv; tg += item.groupPv;
            activeBody.innerHTML += `<tr>
                <td>${index + 1}</td>
                <td style="color:#999; font-size:11px;">${item.date}</td>
                <td style="font-weight:700;">${item.name}</td>
                <td><span style="background:#f1f1f1; padding:4px 8px; border-radius:6px; font-size:11px; font-weight:700;">${item.level}</span></td>
                <td>${item.selfPv}</td><td>${item.groupPv}</td>
                <td class="total-pv-cell">${item.totalPv}</td>
                <td><a href="#" class="wa-btn" onclick="sendWhatsApp('${item.name}', '${item.mobile}')">WhatsApp</a></td>
                <td>
                    <button class="edit-btn" onclick="editItem(${index})">Edit</button>
                    <button class="delete-btn" onclick="moveToTrash(${index})">Del</button>
                </td></tr>`;
        });
        document.getElementById('trashSection').style.display = trash.length > 0 ? 'block' : 'none';
        trash.forEach((item, index) => {
            trashList.innerHTML += `<div class="trash-item">
                <span style="font-size:13px;"><b>${item.name}</b> (${item.date})</span>
                <div>
                    <button onclick="restoreItem(${index})" style="color:#1d976c; border:none; background:none; font-weight:bold; cursor:pointer; font-size:12px; margin-right:10px;">Restore</button>
                    <button onclick="permanentDelete(${index})" style="color:#e74c3c; border:none; background:none; font-weight:bold; cursor:pointer; font-size:12px;">Delete</button>
                </div>
            </div>`;
        });
        document.getElementById('totalSelf').innerText = ts.toLocaleString();
        document.getElementById('totalGroup').innerText = tg.toLocaleString();
    }

    function moveToTrash(idx) {
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP'));
        let trash = JSON.parse(localStorage.getItem('NFVT_FINAL_TRASH')) || [];
        trash.push(data[idx]); data.splice(idx, 1);
        localStorage.setItem('NFVT_FINAL_APP', JSON.stringify(data));
        localStorage.setItem('NFVT_FINAL_TRASH', JSON.stringify(trash));
        displayData();
    }

    function restoreItem(idx) {
        let trash = JSON.parse(localStorage.getItem('NFVT_FINAL_TRASH'));
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP')) || [];
        data.push(trash[idx]); trash.splice(idx, 1);
        localStorage.setItem('NFVT_FINAL_APP', JSON.stringify(data));
        localStorage.setItem('NFVT_FINAL_TRASH', JSON.stringify(trash));
        displayData();
    }

    function permanentDelete(idx) {
        if(confirm("Confirm permanent delete?")) {
            let trash = JSON.parse(localStorage.getItem('NFVT_FINAL_TRASH'));
            trash.splice(idx, 1);
            localStorage.setItem('NFVT_FINAL_TRASH', JSON.stringify(trash));
            displayData();
        }
    }

    function editItem(idx) {
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP'));
        const item = data[idx];
        document.getElementById('entryDate').value = item.date;
        document.getElementById('name').value = item.name;
        document.getElementById('mobile').value = item.mobile;
        document.getElementById('level').value = item.level;
        document.getElementById('selfPv').value = item.selfPv;
        document.getElementById('groupPv').value = item.groupPv;
        document.getElementById('editIndex').value = idx;
        document.getElementById('saveBtn').innerText = "Update Member Record";
        window.scrollTo({top:0, behavior:'smooth'});
    }

    function resetForm() {
        document.getElementById('trackerForm').reset();
        document.getElementById('editIndex').value = "-1";
        document.getElementById('saveBtn').innerText = "Save Member Data";
        document.getElementById('entryDate').valueAsDate = new Date();
    }

    function exportToExcel() {
        let data = JSON.parse(localStorage.getItem('NFVT_FINAL_APP')) || [];
        const ws = XLSX.utils.json_to_sheet(data);
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "NFVT_Data");
        XLSX.writeFile(wb, "Growth_Focus_Report.xlsx");
    }
</script>
</body>
</html>
